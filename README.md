# Tambola Ticket Generator

[![npm version](https://img.shields.io/npm/v/tambola.svg)](https://www.npmjs.com/package/tambola)
[![Build Status](https://img.shields.io/github/workflow/status/geek4teck/tambola/CI)](https://github.com/geek4teck/tambola/actions)
[![License: ISC](https://img.shields.io/badge/License-ISC-blue.svg)](LICENSE)

A robust, well-tested Node.js module to generate standard Tambola (a.k.a. Housie/Bingo) tickets and draw sequences, following all official game rules.

---

## Table of Contents
- [Features](#features)
- [Installation](#installation)
- [Usage](#usage)
- [API Reference](#api-reference)
  - [generateTicket()](#generateticket)
  - [getDrawSequence()](#getdrawsequence)
- [Tambola Ticket Structure](#tambola-ticket-structure)
- [Testing](#testing)
- [Project Structure](#project-structure)
- [Contributing](#contributing)
- [License](#license)
- [Author & Links](#author--links)

---

## Features
- Generates valid Tambola/Housie tickets (3x9 grid, 5 numbers per row, all column and range rules enforced)
- Generates a random draw sequence (1-90, no repeats)
- Fully tested with 45+ unit, edge, and performance tests
- Fast, memory-efficient, and suitable for production use
- Zero dependencies (except for dev/test)

---

## Installation

Requires [Node.js](https://nodejs.org/) v12 or higher.

```bash
npm install tambola --save
```

---

## Usage

### Command Line Interface (CLI)

The package includes a CLI for quick ticket and sequence generation:

```bash
# Generate a tambola ticket
tambola ticket

# Generate multiple tickets
tambola ticket -c 5

# Generate ticket in JSON format
tambola ticket -f json -p

# Generate draw sequence
tambola sequence

# Generate multiple sequences
tambola sequence -c 3

# Save output to file
tambola ticket -o tickets.json
tambola sequence -f csv -o draw.csv

# Show help
tambola --help
```

#### CLI Options
- `--count, -c <number>`: Number of items to generate (1-100)
- `--format, -f <format>`: Output format (table, json, csv, array)
- `--pretty, -p`: Pretty print JSON output
- `--output, -o <file>`: Save output to file

### Programmatic Usage

#### CommonJS
```js
const tambola = require('tambola');

const ticket = tambola.generateTicket();
console.log(ticket);
// Example output:
// [
//   [ 2, 0, 22, 0, 0, 56, 0, 71, 81 ],
//   [ 0, 13, 0, 34, 45, 0, 65, 0, 88 ],
//   [ 7, 19, 0, 39, 0, 59, 67, 0, 0 ]
// ]

const sequence = tambola.getDrawSequence();
console.log(sequence);
// [ 1, 2, 3, ..., 90 ] in random order
```

### ES Modules
```js
import tambola from 'tambola';
const ticket = tambola.generateTicket();
const sequence = tambola.getDrawSequence();
```

---

## API Reference

### `generateTicket()`
**Returns:** `Array<Array<number>>` (3x9 grid)

Generates a valid Tambola ticket as a 3x9 array. Each row contains 5 numbers and 4 blanks (0s). All ticket rules are enforced:
- Each column has 1-3 numbers, in the correct range
- Numbers in each column are in ascending order from top to bottom
- No duplicate numbers in any column
- All numbers are between 1 and 90

#### Example
```js
const ticket = tambola.generateTicket();
// [
//   [ 2, 0, 22, 0, 0, 56, 0, 71, 81 ],
//   [ 0, 13, 0, 34, 45, 0, 65, 0, 88 ],
//   [ 7, 19, 0, 39, 0, 59, 67, 0, 0 ]
// ]
```

### `getDrawSequence()`
**Returns:** `Array<number>` (length 90)

Generates a random sequence of numbers from 1 to 90, with no repeats. Useful for simulating the number draw in a Tambola game.

#### Example
```js
const sequence = tambola.getDrawSequence();
// [ 37, 2, 89, ..., 1 ]
```

---

## Tambola Ticket Structure
A valid Tambola ticket generated by this package will always:
- Be a 3x9 grid (3 rows, 9 columns)
- Each row contains exactly 5 numbers and 4 blanks (0s)
- Each column contains 1-3 numbers, in the following ranges:
  - Column 1: 1-10
  - Column 2: 11-20
  - Column 3: 21-30
  - ...
  - Column 9: 81-90
- Numbers in each column are in ascending order from top to bottom
- No duplicate numbers in any column or row
- All numbers are between 1 and 90

---

## Testing

This package is fully tested with [Jest](https://jestjs.io/). Tests cover:
- Ticket structure and rules
- Draw sequence correctness
- Edge cases and error handling
- Performance and memory usage

### Run All Tests
```bash
npm test
```

### Run Tests in Watch Mode
```bash
npm run test:watch
```

### Run Tests with Coverage
```bash
npm run test:coverage
```

### Run Example
```bash
npm run example
```

### Run CLI
```bash
npm run cli -- --help
npm run cli -- ticket
npm run cli -- sequence
```

### Test Coverage Goals
- Branches: 80%+
- Functions: 80%+
- Lines: 80%+
- Statements: 80%+

#### Test Files
- `__tests__/tambola.test.js` - Main API and rules tests
- `__tests__/helper-functions.test.js` - Helper and validation logic
- `__tests__/performance.test.js` - Performance and stress tests
- `__tests__/test-helpers.js` - Test utilities

---

## Project Structure
```
tambola/
  index.js              # Main module (API)
  bin/
    tambola.js          # CLI executable
  example.js            # Example usage script
  package.json          # Metadata and scripts
  README.md             # This file
  __tests__/
    tambola.test.js     # Main test suite
    helper-functions.test.js
    performance.test.js
    test-helpers.js     # Test utilities
    README.md           # Test documentation
```

---

## Contributing

Contributions, bug reports, and feature requests are welcome!

1. Fork the repository
2. Create a new branch (`git checkout -b feature/your-feature`)
3. Make your changes and add tests
4. Run the test suite (`npm test`)
5. Submit a pull request

Please follow the existing code style and add/modify tests as appropriate.

---

## License

This project is licensed under the [ISC License](LICENSE).

---

## Author & Links

- **Author:** Vishal Goyal
- **NPM:** [tambola](https://www.npmjs.com/package/tambola)
- **GitHub:** [github.com/geek4teck/tambola](https://github.com/geek4teck/tambola)
- **Issues:** [Report Bugs / Request Features](https://github.com/geek4teck/tambola/issues)

---

Enjoy using the Tambola Ticket Generator! If you find it useful, please ⭐️ the repo and consider contributing.
